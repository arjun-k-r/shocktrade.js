<div ng-hide="MySession.userProfile._id" style="display: block; width: 100%">
	<div ng-include src="'/assets/views/signin_notice.htm'"></div>
</div>
<div ng-if="MySession.userProfile._id && !contest._id" class="spectator_message" style="display: block; width: 100%">
	<div ng-include src="'/assets/views/play/no_contest_selected.htm'"></div>
</div>
<div ng-controller="ChatCtrl" ng-if="MySession.userProfile._id && contest._id"
	 style="display: block; width: 100%; background-color: #ffffff">
	<div class="lounge_players" style="margin-top: 3px; margin-bottom: 3px">
		<span ng-repeat="p in contest.participants">
			<avatar id="{{ p.facebookID }}" style="width: 32px; height: 32px; margin: 3px 0px 0px 2px" />
		</span>
	</div>
	<div class="chat_messages">
		<div ng-repeat="message in contest.messages" class="chat_message">
			<avatar id="{{ message.sender.facebookID }}" style="width: 20px; height: 20px; margin: 3px" />
			<span style="color: {{ message.color }}; font-weight: bold">{{ message.sender.name }}</span>
			[<span style="color: #0000ff">{{ (message.sentTime || message.sentTime) | date:'MM/dd hh:mma' }}</span>]
			{{ message.text }}
		</div>
	</div>

	<div style="width: 100%; margin-left: auto">
		<table style="width: 95%; margin-left: auto; margin-right: auto; margin-top: 5px; margin-bottom: 5px">
			<tr>
				<td ng-repeat="emoticon in emoticons">
					<a href="" ng-click="addSmiley(emoticon.symbol)" title="{{ emoticon.tooltip }}">
						<img class="emoticon" ng-src="/assets/images/smilies/{{ emoticon.uri }}">
					</a>
				</td>
			</tr>
		</table>
	</div>
	<div class="block_full">
		<textarea ng-model="chatMessage" style="width: 100%; height: 75px" 
				  ng-disabled="{{ contest.status == 'CLOSED' }}"></textarea>
	</div>
	<div class="block_full">
		<button ng-disabled="{{ contest.status == 'CLOSED' }}"
				ng-click="sendChatMessage(chatMessage)">Send</button>
	</div>
</div>
